{"version":3,"file":"Store/index.js","mappings":";;;;;;;;;;AAAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;ACtBa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,eAAe,mBAAO,CAAC,sBAAQ;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,aAAa;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,kBAAe","sources":["webpack://maroonlis-utils/external commonjs \"lodash\"","webpack://maroonlis-utils/webpack/bootstrap","webpack://maroonlis-utils/./src/Store/index.ts"],"sourcesContent":["module.exports = require(\"lodash\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar lodash_1 = require(\"lodash\");\r\nfunction defaultSet(key, value) {\r\n    if (typeof value === 'object') {\r\n        localStorage.setItem(key, JSON.stringify(value));\r\n    }\r\n    else {\r\n        localStorage.setItem(key, value);\r\n    }\r\n}\r\nfunction defaultGet(key) {\r\n    var value = localStorage.getItem(key);\r\n    try {\r\n        return value && JSON.parse(value);\r\n    }\r\n    catch (_a) {\r\n        return value;\r\n    }\r\n}\r\nfunction defaultRemove(key) {\r\n    localStorage.removeItem(key);\r\n}\r\n/**\r\n *\r\n * @param {string} key\r\n * @param {StoreConfig} config\r\n * @returns\r\n */\r\nfunction Store(key, config) {\r\n    var sset = config && (0, lodash_1.isFunction)(config === null || config === void 0 ? void 0 : config.set) ? config.set : defaultSet;\r\n    var sget = config && (0, lodash_1.isFunction)(config === null || config === void 0 ? void 0 : config.get) ? config.get : defaultGet;\r\n    var sremove = config && (0, lodash_1.isFunction)(config === null || config === void 0 ? void 0 : config.remove) ? config.remove : defaultRemove;\r\n    var storeObj = {\r\n        set: function (value, valueKey) {\r\n            if (!(0, lodash_1.isFunction)(sset)) {\r\n                return;\r\n            }\r\n            if (valueKey) {\r\n                var oldValue = storeObj.get({});\r\n                if (!(oldValue && typeof oldValue === 'object')) {\r\n                    oldValue = {};\r\n                }\r\n                oldValue[valueKey] = value;\r\n                value = oldValue;\r\n            }\r\n            try {\r\n                // 可能触发 DOMException: The quota has been exceeded.\r\n                return sset(key, value);\r\n            }\r\n            catch (e) {\r\n                console.log('store set Error', e);\r\n                return;\r\n            }\r\n        },\r\n        remove: function () {\r\n            if (!(0, lodash_1.isFunction)(sremove)) {\r\n                return;\r\n            }\r\n            return sremove(key);\r\n        },\r\n        get: function (defaultValue, valueKey) {\r\n            if (!(0, lodash_1.isFunction)(sget)) {\r\n                return;\r\n            }\r\n            var value;\r\n            try {\r\n                // Uncaught SyntaxError 错误 可能出现解析错误\r\n                value = sget(key) || defaultValue;\r\n            }\r\n            catch (e) {\r\n                console.error('Storage.get Error', e);\r\n                value = value || defaultValue;\r\n            }\r\n            if (valueKey && value && typeof value === 'object') {\r\n                value = value[valueKey];\r\n            }\r\n            return value || defaultValue;\r\n        },\r\n    };\r\n    return storeObj;\r\n}\r\nexports.default = Store;\r\n"],"names":[],"sourceRoot":""}